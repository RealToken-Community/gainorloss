services:
  frontend:
    image: ${DOCKER_REGISTRY}/rmmgain:${DOCKER_BRANCH}-frontend
    container_name: ${DOCKER_BRANCH}-rmmgain-frontend
    environment:
      - NODE_ENV=production
      - NEXT_PUBLIC_GNOSISSCAN_API_KEY=${NEXT_PUBLIC_GNOSISSCAN_API_KEY}
      - NEXT_PUBLIC_THEGRAPH_API_URL=${NEXT_PUBLIC_THEGRAPH_API_URL}
    networks:
      - traefik-realt
      - rmmgain
    labels:
      - 'traefik.enable=true'
      - 'traefik.http.routers.rmmgain-${DOCKER_BRANCH}.rule=Host(`${HOSTNAME}`)'
      - 'traefik.http.routers.rmmgain-${DOCKER_BRANCH}.entrypoints=websecure'
      - 'traefik.http.services.rmmgain-${DOCKER_BRANCH}.loadbalancer.server.port=3000'
    restart: always

networks:
  traefik-realt:
    external: true
  rmmgain:
